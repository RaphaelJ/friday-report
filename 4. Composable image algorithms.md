# Composable image algorithms

This section will present another cool feature of *friday*. As I said in the
introduction, the library has the property that you can compose algorithms and
expect them to be fused in a single and efficient loop.

The main motivation when designing this feature was to be able to design complex
but efficient transformations from a small set of simple functions (like `map`).

## Image and function isomorphism

To understand how the compiler and the library are allowed to fuse these
algorithms, one must remember *referential transparency*. Referential
transparency is the property which asserts that pure function calls can be
replaced by the values they generate without changing the output of the program.

This property has an interesting effect on images. Images (and more generally
arrays and vectors), in a pure functional programming context, may be thought of
as functions whose domains are restricted to a contiguous subset of integers
(the valid coordinates of the pixels in the case of an image). In other words,
you can replace the image indexing operator by the function which generates the
pixels of the image *without* changing the output of the program.

The main advantage of considering images as functions instead of arrays is
that functions are composable. Function composability is the idea which propels
the fusion mechanism: *friday* considers images as functions and then composes
them into larger functions.

## Low level image creation interface

Images types implement a type class interface which can be used to build images.

The type class for the most part only provides a function to build the image 
type from a function. This function's signature looks like this one:

    fromFunction :: FromFunction i
                 => Size -> (Point -> ImagePixel i) -> i

The function accepts the size of the image to create and a function which 
generates pixels values from a pair of coordinates.

## Two image representations

Two image types implement the previously described interface. One is
named the **manifest** representation while the other is named the **dalayed**
representation.

* The manifest representation uses a 

## Mutable images

Some image processing algorithms can't be written efficiently using 

